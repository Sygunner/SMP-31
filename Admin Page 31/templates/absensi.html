<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- style CSS -->
    <link rel="stylesheet" href="/static/assets/css/absensi.css" />
    <!-- boxicon -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />

    <title>SMPN 31 Bandung</title>
    <style>
      .table__header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-actions {
        margin-right: 10px;
      }

      .btn.btn-add {
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .btn.btn-add:hover {
        background-color: #0056b3;
      }

      .hadir {
        color: green;
      }

      .izin {
        color: blue;
      }

      .sakit {
        color: yellow;
      }

      .alfa {
        color: red;
      }

      .hide {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- sidebar -->
    <section id="sidebar">
      <a href="#" class="brand">
        <i class="bx"></i>
        <span class="text">SMPN 31 Bandung</span>
      </a>
      <ul class="side-menu top">
        <li class="active">
          <a href="/dash">
            <i class="bx bxs-dashboard"></i>
            <span class="text">Beranda</span>
          </a>
        </li>
        <li>
          <a href="/absensi">
            <i class='bx bxs-calendar-edit' ></i>
            <span class="text">Absensi</span>
          </a>
        </li>
        <li>
          <a href="/input">
            <i class='bx bxs-message-dots' ></i>
            <span class="text">Input</span>
          </a>
        </li>
        <li>
          <a href="/jadwal-ujian">
            <i class='bx bxs-report' ></i>
            <span class="text">Jadwal Ujian Guru</span>
          </a>
        </li>
        <li>
          <a href="/input">
            <i class='bx bxs-message-dots' ></i>
            <span class="text">Ujian</span>
          </a>
        </li>
      <ul class="side-menu">
        <li>
          <a href="#">
            <i class="bx bxs-cog"></i>
            <span class="text">Pengaturan</span>
          </a>
        </li>
        <li>
          <a href="/logout" class="logout">
            <i class="bx bxs-log-out-circle"></i>
            <span class="text">Keluar</span>
          </a>
        </li>
      </ul>
    </section>
    <!-- sidebar -->

    <!-- content start -->
    <section id="content">
      <!-- navbar start -->
      <nav>
        <i class="bx bx-menu"></i>
        <a href="#" class="nav-link">Categories</a>
        <form action="#">
          <div class="form-input">
            <input type="search" placeholder="Search..." />
            <button type="submit" class="search-btn">
              <i class="bx bx-search"></i>
            </button>
          </div>
        </form>
        <input type="checkbox" id="switch-mode" hidden>
        <label for="switch-mode" class="switch-mode"></label>
        <a href="#" class="notification">
          <i class="bx bxs-bell"></i>
          <span class="num">8</span>
        </a>
        <a href="#" class="profile">
          <img src="/static/assets/images/logos/people.png" />
        </a>
      </nav>
      <!-- navbar end -->

      <!-- main start -->
      <main>
        <div class="head-title">
          <div class="left">
            <h1>Absensi</h1>
            <ul class="breadcrumb">
              <li>
                <a href="#">Absensi</a>
              </li>
              <li><i class="bx bx-chevron-right"></i></li>
              <li>
                <a class="active" href="#">Daftar Hadir Guru</a>
              </li>
            </ul>
          </div>
        </div>

        <main class="table" id="customers_table">
          <section class="table__header">
            <h1>Daftar Hadir Guru</h1>
            <div class="input-group">
              <input type="search" placeholder="Search Data..." />
              <img src="/static/assets/images/logos/search.png" alt="" />
            </div>
          </section>

          <section class="table__body">
            <table>
              <thead>
                <tr>
                  <th> Id</th>
                  <th> Nama Guru</th>
                  <th> Mapel</th>
                  <th> Tanggal</th>
                  <th> Status</th>
                  <th> Keterangan</th>
                  <th> Aksi</th>
                </tr>
              </thead>
              <tbody id="tableBody">
                {% for pe in absen %}
                <tr>
                  <td>{{ loop.index }}</td>
                  <td><img src="/static/assets/images/logos/smile.jpeg" alt="" />{{ pe.nama }}</td>
                  <td>{{ pe.kelas }}</td>
                  <td>{{ pe.tanggal }}</td>
                  <td class="{{ pe.status_kehadiran | lower }}">{{ pe.status_kehadiran }}</td>
                  <td>{{ pe.keterangan }}</td>
                  <td>
                    <a href="{{ url_for('edit_absen', id=pe['_id']) }}">Edit</a> |
                    <a href="{{ url_for('delete_data3', absen_id=pe['_id']) }}">Hapus</a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </section>
        </main>
      </main>
      <!-- main end -->
    </section>
    <!-- content end -->

    <!-- JavaScript -->
    <script>
      const search = document.querySelector('.input-group input'),
        table_rows = document.querySelectorAll('tbody tr'),
        table_headings = document.querySelectorAll('thead th');

      // 1. Searching for specific data of HTML table
      search.addEventListener('input', searchTable);

      function searchTable() {
        table_rows.forEach((row, i) => {
          let table_data = row.textContent.toLowerCase(),
            search_data = search.value.toLowerCase();

          row.classList.toggle('hide', table_data.indexOf(search_data) < 0);
          row.style.setProperty('--delay', i / 25 + 's');
        });

        document.querySelectorAll('tbody tr:not(.hide)').forEach((visible_row, i) => {
          visible_row.style.backgroundColor = (i % 2 == 0) ? 'transparent' : '#0000000b';
        });
      }
    </script>
  </body>
</html>
